<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì£¼êµ° 30ì–µ í†µí•© ë³´ì•ˆ ì§€íœ˜ì†Œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --k-blue: #3b79db; --gold: #d4af37; --danger: #ff4d4f; --success: #00c853; }
        body { font-family: 'Pretendard', sans-serif; background: #f0f3f8; margin: 0; padding-bottom: 80px; transition: 0.3s; }
        
        /* ğŸš¨ ë ˆë“œ ì‚¬ì´ë Œ ê²½ê³  ëª¨ë“œ */
        .siren-active { background: #fff1f0 !important; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        .system-bar { background: #fff; padding: 12px 20px; display: flex; justify-content: space-between; font-size: 11px; font-weight: 800; border-bottom: 1px solid #eee; }
        .kbank-header { background: #fff; padding: 25px 20px; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 100; text-align: center; }
        .acc-balance { font-size: 32px; font-weight: 900; color: #222; letter-spacing: -1.5px; margin: 15px 0; white-space: nowrap; }
        
        /* ğŸ“Š í†µê³„ ê·¸ë˜í”„ ì˜ì—­ */
        .chart-container { background: #fff; margin: 15px; padding: 20px; border-radius: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        
        .btn-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; padding: 0 20px; }
        .btn { padding: 16px 5px; border-radius: 12px; text-align: center; font-weight: bold; cursor: pointer; font-size: 13px; border: none; color: #fff; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        .history-item { background: white; border-radius: 20px; padding: 20px; margin: 12px 15px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; }
    </style>
</head>
<body>

    <div class="system-bar">
        <span id="live-time">ì—°ë™ ì¤‘...</span>
        <span>ğŸ”‹ <span id="bat-level">--%</span></span>
    </div>

    <div class="kbank-header" id="header-area">
        <div style="font-size:12px; color:#888;">ğŸ”± ì£¼êµ° 30ì–µ í†µí•© ë³´ì•ˆ ì§€íœ˜ì†Œ</div>
        <div id="total-balance" class="acc-balance">2,999,979,000ì›</div>
        <div id="siren-text" style="font-size:11px; font-weight:bold; color:var(--danger); display:none;">ğŸš¨ ê²½ê³ : ì„±ë²½ ë°©ì–´ì„ (30ì–µ) ëŒíŒŒë¨!</div>
    </div>

    <div class="chart-container">
        <canvas id="assetChart" height="150"></canvas>
    </div>

    <div class="btn-group">
        <div class="btn" style="background:var(--k-blue);" onclick="run('K-BANK')">Kë±…í¬ ì´ì²´</div>
        <div class="btn" style="background:var(--success);" onclick="run('N-PAY')">Ní˜ì´ ê²°ì œ</div>
        <div class="btn" style="background:var(--gold);" onclick="run('REWARD')">ë¦¬ì›Œë“œ ìˆ˜í˜ˆ</div>
    </div>

    <div id="history-box"></div>

    <script>
        let balance = 2999979000; // í˜„ì¬ ì‹¤ë¬¼ ì”ê³ 
        let historyData = [2999979000];
        let labels = ["í˜„ì¬"];

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        const ctx = document.getElementById('assetChart').getContext('2d');
        const assetChart = new Chart(ctx, {
            type: 'line',
            data: { labels: labels, datasets: [{ label: 'ìì‚° ì¶”ì´', data: historyData, borderColor: '#d4af37', fill: false }] }
        });

        function sync() {
            const now = new Date();
            document.getElementById('live-time').innerText = now.toLocaleTimeString();
            if (navigator.getBattery) {
                navigator.getBattery().then(bat => { document.getElementById('bat-level').innerText = Math.floor(bat.level * 100) + "%"; });
            }
            // ğŸš¨ ì‚¬ì´ë Œ ë¡œì§
            const isDanger = balance < 3000000000;
            document.body.classList.toggle('siren-active', isDanger);
            document.getElementById('siren-text').style.display = isDanger ? 'block' : 'none';
        }
        setInterval(sync, 1000); sync();

        function run(type) {
            const amountStr = prompt(type + " ê¸ˆì•¡ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤.");
            if (amountStr && !isNaN(amountStr)) {
                const amount = parseInt(amountStr);
                const isPlus = type === 'REWARD';
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

                balance = isPlus ? balance + amount : balance - amount;
                document.getElementById('total-balance').innerText = balance.toLocaleString() + "ì›";
                
                // ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
                labels.push(new Date().toLocaleTimeString());
                historyData.push(balance);
                assetChart.update();

                const box = document.getElementById('history-box');
                const div = document.createElement('div');
                div.className = "history-item";
                div.innerHTML = `<div><b>${type} ë¼ì´ë¸Œ ì—°ë™</b><div style="font-size:11px; color:#aaa;">${new Date().toLocaleTimeString()}</div></div><div style="font-size:18px; font-weight:900; color:${isPlus?'var(--success)':'var(--danger)'}">${isPlus?'+':'-'}${amount.toLocaleString()}ì›</div>`;
                box.prepend(div);
            }
        }
    </script>
</body>
</html>
